/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   float_to_binary.c                                  :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: sschmele <marvin@42.fr>                    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2019/03/15 13:06:16 by sschmele          #+#    #+#             */
/*   Updated: 2019/03/16 18:14:54 by sschmele         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

#include <stdio.h>
#include "ft_printf.h"

char		*ft_fdtoa_base(float nb, int base, int precision)
{
	char	*str;
	int		i;
	long double	a = 0.0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000099999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999;
//это макс число, дальше начнет материться, 1100 минус 27 знаков выводится
	char *s = "0.00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000988131291682493088353137585736442744730119605228649528851171365001351014540417503730599672723271984759593129390891435461853313420711879592797549592021563756252601426380622809055691634335697964207377437272113997461446100012774818307129968774624946794546339230280063430770796148252477131182342053317113373536374079120621249863890543182984910658610913088802254960259419999083863978818160833126649049514295738029453560318710477223100269607052986944038758053621421498340666445368950667144166486387218476578691673612021202301233961950615668455463665849580996504946155275185449574931216955640746893939906729403594535543517025132110239826300978220290207572547633450191167477946719798732961988232841140527418055848553508913045817507736501283943653106689453125000000000000000000000000000";//это результат, получаемый от "NB: %.1100Lf\n", a
	printf("len of the max output= %zu\n", ft_strlen(s)); //1102 symbols
	printf ("lond double: %zu\n", sizeof(long double)); //16
	printf ("NB: %.1100Lf\n", a);
	i = 0;
	a = 1;
	str = ft_strnewsetchar(23, '0');
	while (a > 0.00000011920928955078125)
	{
		if ((nb - a) >= 0)
		{
			str[i] = '1';
			nb = nb - a;
		}
		a *= 0.5;
		i++;
		printf("a and i: %.20Lf		%Lf %d\n", a, a, i);
		//printf("nb - a: %f\n", nb - a);
	}
	//printf("str after clculations: %s\n", str);
	return (str);
}

int	main(void)
{
	float a = -185.4375;
	char *before;
	char *after;
	char *res;
	char *s;
	int i;

	i = 0;
	a *= -1;
	before = ft_ltoa_base(-185, 2);
	after = ft_fdtoa_base(0.4375, 2, 5);
	printf("before and after= %s %s\n", before, after);
	res = ft_strnew(32);
	res[i] = (a < 0) ? '1' : '0';
	


	return (0);
}
